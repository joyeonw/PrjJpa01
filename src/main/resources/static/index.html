<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
  <h2>Home</h2>
  <div><a href="http://localhost:9090/hello.html">hello.html</a></div>
  <div><a href="/hello.html">hello.html</a></div>
  <div><a href="/hi">Greetings</a></div>
  <div><a href="/hi2">원영님 반갑습니다 </a></div>
  <div><a href="/hi3">반갑습니다(부트스트랩) </a></div>
  <div><a href="/hi4">반갑습니다(include 기술사용) </a></div>
  <div>&nbsp;</div>
  <div><a href="/articles/WriteForm">새 글쓰기</a></div>
  <div><a href="/articles/1">1번 글 조회</a></div>
  <div><a href="/articles/List">글 목록 조회</a></div>
  <div>&nbsp;</div>
  <div><a href="/apitest.html">API test</a></div>
  <div>&nbsp;</div>
  <div><a href="/RestExam">Rest Api Get</a></div>
  <div>
  	<form action="/RestExam" method="get">
  		<input type="submit" value="get" />
  	</form>
  </div>
  <div>
  	<form action="/RestExam" method="post">
  		<input type="submit" value="post" />
  	</form>
  </div>
  <div>
  	<form action="/RestExam" method="put">
  		<input type="submit" value="put" />
  	</form>
  </div>
     
  <div>
  	<form action="/RestExam" method="delete">
  		<input type="submit" value="delete"/>
  	</form>
  </div>
  
  <div>&nbsp;</div>
  <div><a href="/h2-console">db 확인</a></div>
  
  <script>
  	// form 에 있는 <input type="submit" /> 
  	//              <input type="img" /> 
  	//              <button></button>
  	// 모두 form 의 submit 이벤트를 발생시킨다
  	// submit 이벤트 form action 의 페이지로 이동
  	// form name 속성을 가진 input 들의 value 를 가지고 간다
  	const formEls = document.querySelectorAll('form'); //3
  	formEls.forEach( (form, i) => {
				//  form == formEls[i] == this
				form.addEventListener('submit', function(e){
						// submit event 의 기본이벤트(기능)을 중지 - e
						e.preventDefault();
						console.dir(e)          // this == e.target
// 						console.dir(e.target)
						alert(e.submitter.value)
						fetch(this.action, {
								method : e.submitter.value
						}) 
							.then( (response) => {
								return response.text()
							})
							.then( (text) => {
								console.dir(text)
										alert(text)
							})
							.catch( (error) => {
										console.dir(error)
										alert(error)
							})
							
				})
  	});
  </script>
  
</body>
</html>











